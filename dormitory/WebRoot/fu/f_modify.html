<style type="text/css">
.item {
	height:25px;
	margin-top:3px;
}
.item span {
	display:inline-block;
	margin-right:10px;
	text-align:right;
	padding-right:0;
	width:100px;
	color:#000;
	font-size:14px;
}
.help {
	margin-top:10px;
}
input[type='button'] {
	margin-left:120px;
}
input[type='reset'] {
	margin-left:50px;
}
input[type='text'],input[type='password']{
	width:200px;
	height:20px;
}
.right_foot{
	float:left;
	margin-left:50px;
	margin-top:30px;
}
</style>
<div>
    <div class="right_top btm">
      <div class="rheader"><span class="pageName"><b>辅导员信息修改界面</b></span><span class="shuoming">您可以修改您的基本信息</span></div>
    </div>
    <div class="right_foot">
          <form id="form1">
              <p class="item"><span>姓名:</span>
                 <input type="text" name="name" class="name">
                <br />
              </p>
              <p class="item"><span>性别：</span>
                 <input type="text" name="sex" class="sex">
                <br />
              </p>
              <p class="item"><span>电话：</span>
                 <input type="text" name="phone" class="phone">
                <br />
              </p>
               <p class="item"><span>旧密码:</span>
                   <input  type="password" name="old"  class="old" onblur="checkPwd()">
                   <br />
               </p>
               <p class="item"><span>新密码:</span>
                   <input  type="password" name="password" class="new">
                   <br /> 
               </p>
               <p class="item"><span>确认新密码:</span>
                   <input  type="password" name="newagain" onblur="checkNew()" class="again">
                   <br />
               </p>
               <div class="help">
                     <input type="button" value="修改" id="modify">
                     <input type="reset" value="重置">
                </div>
          </form>
     </div>
</div>
<script type="text/javascript">
    //获取登录辅导员的信息
	$(document).ready(function(){
		var tec_name="";
		var tec_phone="";
		var tec_sex="";
		$.get("teacherInfo/findTeacher.do",function(data){
			tec_name=data.name;
			tec_sex=data.sex;
			tec_phone=data.phone;
			$('.name').attr("value",tec_name);
		    $('.sex').attr("value",tec_sex);
		    $('.phone').attr("value",tec_phone);
		});
	});
	var ok_1=false,ok_2=false,ok_3=false;
	function checkPwd(){
	    var password= $(".old").val();
		$.post("teacherInfo/checkPw.do",{"pw":password},function(data){
		   if(data.status==0){
		        $.messager.alert("警告",data.info,"warning");
		        $(".old").empty();
		   }else if(data.status==1){
		       $.messager.alert("提示",data.info,"info");
		       ok_1=true;
		   }
		});
	}
	function checkNew(){
		var key1 = $(".new").val();
		var key2 = $(".again").val();
		if(key2 != key1){
		   $.messager.alert("提示","两次密码输入不一致","info");
		   $(".again").html("");
		   $(".new").html("");
		}else if(key2==key1){
		   ok_2=true;
		}
	}
	$("#modify").click(function(){
	    var name = $(".name").val();
		var phone = $(".phone").val();
		var sex=$(".sex").val();
		var password =$(".new").val();
		if(name == ""){
			 $.messager.alert("提示","姓名为必填","info");
			 return false;
		}else if(phone == ""){
			 $.messager.alert("提示","电话为必填","info");
			 return false;
		}else{
			ok_3=true;
		}
		if(ok_1&&ok_2&&ok_3){
		   $.post('teacherInfo/updateTeacher.do',{"name":name,"sex":sex,"phone":phone,"password":password},function(data){
		      if(data.status==1){
				$.messager.alert("提示","修改成功");
				}else{
				  $.messager.alert("提示","修改失败");
			  }
		   });	
	    }
	});
</script>